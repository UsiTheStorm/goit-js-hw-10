{"version":3,"file":"1-timer.js","sources":["../src/js/utilitis/toasts.js","../src/js/1-timer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Function to show a success toast\nexport const showSuccessToast = (message) => {\n    iziToast.success({\n        title: '✅',\n        // backgroundColor: '#a6a2e4',\n        message: message,\n        position: 'bottomRight',\n        transitionIn: 'bounceInRight',\n        transitionOut: 'fadeOut',\n        progressBar: true,\n        theme: 'light',\n        animateInside: true,\n        timeout: 5000,\n    });\n};\n\n// Function to show an error toast\nexport const showErrorToast = (message) => {\n    iziToast.error({\n        title: '❌',\n        // backgroundColor: '#a6a2e4',\n        message: message,\n        position: 'bottomRight',\n        transitionIn: 'bounceInRight',\n        transitionOut: 'fadeOut',\n        progressBar: true,\n        theme: 'light',\n        animateInside: true,\n        timeout: 5000,\n    });\n};\n\n// Function to show a warning toast\nexport const showWarningToast = (message) => {\n    iziToast.warning({\n        title: '⚠️',\n        // backgroundColor: '#a6a2e4',\n        message: message,\n        position: 'bottomRight',\n        transitionIn: 'bounceInRight',\n        transitionOut: 'fadeOut',\n        progressBar: true,\n        theme: 'light',\n        animateInside: true,\n        timeout: 5000,\n    });\n};\n","import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport { showSuccessToast, showWarningToast } from './utilitis/toasts';\n\nconst TIMER_STATE_IDLE = 'idle';\nconst TIMER_STATE_READY = 'ready';\nconst TIMER_STATE_RUNNING = 'running';\n\nconst startBtn = document.querySelector('[data-start]');\nconst stopBtn = document.querySelector('[data-stop]');\n\nconst dateInput = document.querySelector('#datetime-picker');\n\nconst daysEl = document.querySelector('[data-days]');\nconst hoursEl = document.querySelector('[data-hours]');\nconst minutesEl = document.querySelector('[data-minutes]');\nconst secondsEl = document.querySelector('[data-seconds]');\n\nlet userSelectedDate = null;\nlet timerId = null;\n\nsetTimerState(TIMER_STATE_IDLE);\n\n// Function to check if there is saved date from previous\nfunction checkForSavedDate() {\n    const savedDate = Number(localStorage.getItem('countdownDate'));\n    const isCountdownRunning = localStorage.getItem('isCountdownRunning');\n\n    if (savedDate && Number.isFinite(savedDate)) {\n        const savedDateObject = new Date(savedDate);\n        if (savedDateObject > new Date()) {\n            userSelectedDate = savedDateObject;\n            setTimerState(TIMER_STATE_READY);\n            if (isCountdownRunning === 'true') {\n                updateUi(convertMs(userSelectedDate - Date.now()));\n                startCountdown();\n            }\n        } else {\n            localStorage.removeItem('countdownDate');\n            localStorage.removeItem('isCountdownRunning');\n            setTimerState(TIMER_STATE_IDLE);\n        }\n    } else {\n        setTimerState(TIMER_STATE_IDLE);\n    }\n}\ncheckForSavedDate();\n\n// Function to change timer and buttons state\nfunction setTimerState(state) {\n    switch (state) {\n        // Timer is waiting for date input / Stopped\n        case TIMER_STATE_IDLE:\n            startBtn.disabled = true;\n            stopBtn.disabled = true;\n            dateInput.disabled = false;\n            break;\n        // Timer is ready for running\n        case TIMER_STATE_READY:\n            startBtn.disabled = false;\n            stopBtn.disabled = true;\n            dateInput.disabled = false;\n            break;\n        // Timer is running\n        case TIMER_STATE_RUNNING:\n            startBtn.disabled = true;\n            stopBtn.disabled = false;\n            dateInput.disabled = true;\n            break;\n        default:\n            console.error(`Unknown timer state: ${state}`);\n    }\n}\n\n// Function to get saved date or now\nfunction getSetDateOrNow() {\n    const localSavedDate = Number(localStorage.getItem('countdownDate'));\n    if (localSavedDate && Number.isFinite(localSavedDate)) {\n        return new Date(localSavedDate);\n    } else {\n        return new Date();\n    }\n}\n\nstartBtn.addEventListener('click', () => {\n    if (!userSelectedDate || userSelectedDate < new Date()) {\n        showWarningToast('Please choose a date in the future');\n    } else {\n        startCountdown();\n        localStorage.setItem('isCountdownRunning', 'true');\n        showSuccessToast('Countdown started');\n    }\n});\nstopBtn.addEventListener('click', stopCountdown);\n\n// Function to convert milliseconds to days, hours, minutes and seconds\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\n// Function to add leading zero\nfunction padWithZero(value) {\n    return value.toString().padStart(2, '0');\n}\n\n// Function to get time difference in milliseconds\nfunction getMsDifference(selectedDate) {\n    return selectedDate - Date.now();\n}\n\n// Function to update UI\nfunction updateUi({ days, hours, minutes, seconds }) {\n    daysEl.textContent = padWithZero(days);\n    hoursEl.textContent = padWithZero(hours);\n    minutesEl.textContent = padWithZero(minutes);\n    secondsEl.textContent = padWithZero(seconds);\n}\n// Function to reset timer\nfunction resetTimer() {\n    clearInterval(timerId);\n    userSelectedDate = null;\n    timerId = null;\n    setTimerState(TIMER_STATE_IDLE);\n    updateUi({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n    localStorage.removeItem('countdownDate');\n    localStorage.removeItem('isCountdownRunning');\n}\n\n// Function to start countdown\nfunction startCountdown() {\n    if (timerId !== null) {\n        showWarningToast('Timer is already running');\n        return;\n    }\n\n    setTimerState(TIMER_STATE_RUNNING);\n\n    timerId = setInterval(() => {\n        let msDiff = getMsDifference(userSelectedDate);\n        if (msDiff <= 0) {\n            console.log('Time is up');\n            showSuccessToast('Time is up');\n            resetTimer();\n            return;\n        }\n        let time = convertMs(msDiff);\n        updateUi(time);\n    }, 1000);\n}\n\n// Function to stop countdown\nfunction stopCountdown() {\n    resetTimer();\n    console.log('Timer stopped');\n}\n\n// Timer initialization\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: getSetDateOrNow(),\n    minDate: 'today',\n    minuteIncrement: 1,\n    // This function is triggered when the date picker is closed.\n    // It validates the selected date and updates the timer state accordingly.\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0];\n        if (userSelectedDate < new Date()) {\n            showWarningToast('Please choose a date in the future');\n            setTimerState(TIMER_STATE_IDLE);\n        } else {\n            setTimerState(TIMER_STATE_READY);\n            if (localStorage.getItem('countdownDate') !== userSelectedDate.getTime().toString()) {\n                localStorage.setItem('countdownDate', userSelectedDate.getTime());\n            }\n            localStorage.setItem('isCountdownRunning', 'false');\n        }\n    },\n};\n\nflatpickr('#datetime-picker', options);\n"],"names":["showSuccessToast","message","iziToast","showWarningToast","TIMER_STATE_IDLE","TIMER_STATE_READY","TIMER_STATE_RUNNING","startBtn","stopBtn","dateInput","daysEl","hoursEl","minutesEl","secondsEl","userSelectedDate","timerId","setTimerState","checkForSavedDate","savedDate","isCountdownRunning","savedDateObject","updateUi","convertMs","startCountdown","state","getSetDateOrNow","localSavedDate","stopCountdown","ms","days","hours","minutes","seconds","padWithZero","value","getMsDifference","selectedDate","resetTimer","msDiff","time","options","selectedDates","flatpickr"],"mappings":"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"}