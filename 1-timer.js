import"./assets/styles-CEGbuB2w.js";import{i as h,f as C}from"./assets/vendor-DHwbnsIA.js";const S=e=>{h.success({title:"✅",message:e,position:"bottomRight",transitionIn:"bounceInRight",transitionOut:"fadeOut",progressBar:!0,theme:"light",animateInside:!0,timeout:5e3})},d=e=>{h.warning({title:"⚠️",message:e,position:"bottomRight",transitionIn:"bounceInRight",transitionOut:"fadeOut",progressBar:!0,theme:"light",animateInside:!0,timeout:5e3})},a="idle",m="ready",w="running",i=document.querySelector("[data-start]"),u=document.querySelector("[data-stop]"),l=document.querySelector("#datetime-picker"),E=document.querySelector("[data-days]"),v=document.querySelector("[data-hours]"),k=document.querySelector("[data-minutes]"),M=document.querySelector("[data-seconds]");let t=null,c=null;n(a);function N(){const e=Number(localStorage.getItem("countdownDate")),o=localStorage.getItem("isCountdownRunning");if(e&&Number.isFinite(e)){const s=new Date(e);s>new Date?(t=s,n(m),o==="true"&&(g(I(t-Date.now())),b())):(localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning"),n(a))}else n(a)}N();function n(e){switch(e){case a:i.disabled=!0,u.disabled=!0,l.disabled=!1;break;case m:i.disabled=!1,u.disabled=!0,l.disabled=!1;break;case w:i.disabled=!0,u.disabled=!1,l.disabled=!0;break;default:console.error(`Unknown timer state: ${e}`)}}function q(){const e=Number(localStorage.getItem("countdownDate"));return e&&Number.isFinite(e)?new Date(e):new Date}i.addEventListener("click",()=>{!t||t<new Date?d("Please choose a date in the future"):(b(),localStorage.setItem("isCountdownRunning","true"),S("Countdown started"))});u.addEventListener("click",O);function I(e){const p=Math.floor(e/864e5),T=Math.floor(e%864e5/36e5),y=Math.floor(e%864e5%36e5/6e4),R=Math.floor(e%864e5%36e5%6e4/1e3);return{days:p,hours:T,minutes:y,seconds:R}}function r(e){return e.toString().padStart(2,"0")}function _(e){return e-Date.now()}function g({days:e,hours:o,minutes:s,seconds:f}){E.textContent=r(e),v.textContent=r(o),k.textContent=r(s),M.textContent=r(f)}function D(){clearInterval(c),t=null,c=null,n(a),g({days:0,hours:0,minutes:0,seconds:0}),localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning")}function b(){if(c!==null){d("Timer is already running");return}n(w),c=setInterval(()=>{let e=_(t);if(e<=0){console.log("Time is up"),S("Time is up"),D();return}let o=I(e);g(o)},1e3)}function O(){D(),console.log("Timer stopped")}const x={enableTime:!0,time_24hr:!0,defaultDate:q(),minDate:"today",minuteIncrement:1,onClose(e){t=e[0],t<new Date?(d("Please choose a date in the future"),n(a)):(n(m),localStorage.getItem("countdownDate")!==t.getTime().toString()&&localStorage.setItem("countdownDate",t.getTime()),localStorage.setItem("isCountdownRunning","false"))}};C("#datetime-picker",x);
//# sourceMappingURL=1-timer.js.map
