import"./assets/styles-DstMkDFQ.js";import{i as h,f as R,c as v}from"./assets/vendor-B1CLq4HH.js";const w=e=>{h.success({title:"âœ…",message:e,position:"bottomRight",transitionIn:"bounceInRight",transitionOut:"fadeOut",progressBar:!0,theme:"light",animateInside:!0,timeout:5e3})},d=e=>{h.warning({title:"",message:e,backgroundColor:"#a6a2e4",position:"bottomRight",transitionIn:"bounceInRight",transitionOut:"fadeOut",progressBar:!0,theme:"light",animateInside:!0,timeout:5e3})},a="idle",m="ready",S="running",i=document.querySelector("[data-start]"),u=document.querySelector("[data-stop]"),l=document.querySelector("#datetime-picker"),E=document.querySelector("[data-days]"),k=document.querySelector("[data-hours]"),M=document.querySelector("[data-minutes]"),N=document.querySelector("[data-seconds]");let t=null,c=null;//! --- Functions ---
function r(e){return e.toString().padStart(2,"0")}function I(e){const p=Math.floor(e/864e5),T=Math.floor(e%864e5/36e5),y=Math.floor(e%864e5%36e5/6e4),C=Math.floor(e%864e5%36e5%6e4/1e3);return{days:p,hours:T,minutes:y,seconds:C}}function q(e){return e-Date.now()}function g({days:e,hours:o,minutes:s,seconds:f}){E.textContent=r(e),k.textContent=r(o),M.textContent=r(s),N.textContent=r(f)}function n(e){switch(e){case a:i.disabled=!0,u.disabled=!0,l.disabled=!1;break;case m:i.disabled=!1,u.disabled=!0,l.disabled=!1;break;case S:i.disabled=!0,u.disabled=!1,l.disabled=!0;break;default:console.error(`Unknown timer state: ${e}`)}}function D(){clearInterval(c),t=null,c=null,n(a),g({days:0,hours:0,minutes:0,seconds:0}),localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning")}function b(){if(c!==null){d("Timer is already running");return}n(S),c=setInterval(()=>{const e=q(t);if(e<=0){console.log("Time is up"),w("Time is up"),v({particleCount:100,spread:100,origin:{y:.6}}),D();return}const o=I(e);g(o)},1e3)}function _(){D(),console.log("Timer stopped")}function O(){const e=Number(localStorage.getItem("countdownDate"));return e&&Number.isFinite(e)?new Date(e):new Date}function x(){const e=Number(localStorage.getItem("countdownDate")),o=localStorage.getItem("isCountdownRunning");if(e&&Number.isFinite(e)){const s=new Date(e);s>new Date?(t=s,n(m),o==="true"&&(g(I(t-Date.now())),b())):(localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning"),n(a))}else n(a)}//! --- Initialization ---
n(a);x();i.addEventListener("click",()=>{!t||t<new Date?d("Please choose a date in the future"):(b(),localStorage.setItem("isCountdownRunning","true"),w("Countdown started"))});u.addEventListener("click",_);const A={enableTime:!0,time_24hr:!0,defaultDate:O(),minDate:"today",minuteIncrement:1,onClose(e){[t]=e,t<new Date?(d("Please choose a date in the future"),n(a),localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning")):(n(m),Number(localStorage.getItem("countdownDate"))!==t.getTime()&&localStorage.setItem("countdownDate",t.getTime()),localStorage.setItem("isCountdownRunning","false"))}};R("#datetime-picker",A);
//# sourceMappingURL=1-timer.js.map
