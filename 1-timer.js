import"./assets/styles-DstMkDFQ.js";import{f as C,c as v}from"./assets/vendor-B1CLq4HH.js";import{b as d,a as S}from"./assets/toasts-C1dDwQNC.js";const a="idle",m="ready",w="running",c=document.querySelector("[data-start]"),u=document.querySelector("[data-stop]"),l=document.querySelector("#datetime-picker"),E=document.querySelector("[data-days]"),R=document.querySelector("[data-hours]"),k=document.querySelector("[data-minutes]"),M=document.querySelector("[data-seconds]");let t=null,i=null;//! --- Functions ---
function s(e){return e.toString().padStart(2,"0")}function D(e){const b=Math.floor(e/864e5),p=Math.floor(e%864e5/36e5),y=Math.floor(e%864e5%36e5/6e4),T=Math.floor(e%864e5%36e5%6e4/1e3);return{days:b,hours:p,minutes:y,seconds:T}}function N(e){return e-Date.now()}function f({days:e,hours:o,minutes:r,seconds:g}){E.textContent=s(e),R.textContent=s(o),k.textContent=s(r),M.textContent=s(g)}function n(e){switch(e){case a:c.disabled=!0,u.disabled=!0,l.disabled=!1;break;case m:c.disabled=!1,u.disabled=!0,l.disabled=!1;break;case w:c.disabled=!0,u.disabled=!1,l.disabled=!0;break;default:console.error(`Unknown timer state: ${e}`)}}function h(){clearInterval(i),t=null,i=null,n(a),f({days:0,hours:0,minutes:0,seconds:0}),localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning")}function I(){if(i!==null){d("Timer is already running");return}n(w),i=setInterval(()=>{const e=N(t);if(e<=0){console.log("Time is up"),S("Time is up"),v({particleCount:100,spread:100,origin:{y:.6}}),h();return}const o=D(e);f(o)},1e3)}function q(){h(),console.log("Timer stopped")}function _(){const e=Number(localStorage.getItem("countdownDate"));return e&&Number.isFinite(e)?new Date(e):new Date}function x(){const e=Number(localStorage.getItem("countdownDate")),o=localStorage.getItem("isCountdownRunning");if(e&&Number.isFinite(e)){const r=new Date(e);r>new Date?(t=r,n(m),o==="true"&&(f(D(t-Date.now())),I())):(localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning"),n(a))}else n(a)}//! --- Initialization ---
n(a);x();c.addEventListener("click",()=>{!t||t<new Date?d("Please choose a date in the future"):(I(),localStorage.setItem("isCountdownRunning","true"),S("Countdown started"))});u.addEventListener("click",q);const A={enableTime:!0,time_24hr:!0,defaultDate:_(),minDate:"today",minuteIncrement:1,onClose(e){[t]=e,t<new Date?(d("Please choose a date in the future"),n(a),localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning")):(n(m),Number(localStorage.getItem("countdownDate"))!==t.getTime()&&localStorage.setItem("countdownDate",t.getTime()),localStorage.setItem("isCountdownRunning","false"))}};C("#datetime-picker",A);
//# sourceMappingURL=1-timer.js.map
