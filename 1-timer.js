import"./assets/styles-DstMkDFQ.js";import{i as h,f as R,c as v}from"./assets/vendor-CHE3CMBa.js";const w=t=>{h.success({title:"âœ…",message:t,position:"bottomRight",transitionIn:"bounceInRight",transitionOut:"fadeOut",progressBar:!0,theme:"light",animateInside:!0,timeout:5e3})},d=t=>{h.warning({title:"",message:t,position:"bottomRight",transitionIn:"bounceInRight",transitionOut:"fadeOut",progressBar:!0,theme:"light",animateInside:!0,timeout:5e3})},a="idle",m="ready",S="running",i=document.querySelector("[data-start]"),u=document.querySelector("[data-stop]"),l=document.querySelector("#datetime-picker"),E=document.querySelector("[data-days]"),k=document.querySelector("[data-hours]"),M=document.querySelector("[data-minutes]"),N=document.querySelector("[data-seconds]");let e=null,c=null;//! --- Functions ---
function r(t){return t.toString().padStart(2,"0")}function I(t){const p=Math.floor(t/864e5),T=Math.floor(t%864e5/36e5),y=Math.floor(t%864e5%36e5/6e4),C=Math.floor(t%864e5%36e5%6e4/1e3);return{days:p,hours:T,minutes:y,seconds:C}}function q(t){return t-Date.now()}function g({days:t,hours:o,minutes:s,seconds:f}){E.textContent=r(t),k.textContent=r(o),M.textContent=r(s),N.textContent=r(f)}function n(t){switch(t){case a:i.disabled=!0,u.disabled=!0,l.disabled=!1;break;case m:i.disabled=!1,u.disabled=!0,l.disabled=!1;break;case S:i.disabled=!0,u.disabled=!1,l.disabled=!0;break;default:console.error(`Unknown timer state: ${t}`)}}function D(){clearInterval(c),e=null,c=null,n(a),g({days:0,hours:0,minutes:0,seconds:0}),localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning")}function b(){if(c!==null){d("Timer is already running");return}n(S),c=setInterval(()=>{const t=q(e);if(t<=0){console.log("Time is up"),w("Time is up"),v({particleCount:100,spread:100,origin:{y:.6}}),D();return}const o=I(t);g(o)},1e3)}function _(){D(),console.log("Timer stopped")}function O(){const t=Number(localStorage.getItem("countdownDate"));return t&&Number.isFinite(t)?new Date(t):new Date}function x(){const t=Number(localStorage.getItem("countdownDate")),o=localStorage.getItem("isCountdownRunning");if(t&&Number.isFinite(t)){const s=new Date(t);s>new Date?(e=s,n(m),o==="true"&&(g(I(e-Date.now())),b())):(localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning"),n(a))}else n(a)}//! --- Initialization ---
n(a);x();i.addEventListener("click",()=>{!e||e<new Date?d("Please choose a date in the future"):(b(),localStorage.setItem("isCountdownRunning","true"),w("Countdown started"))});u.addEventListener("click",_);const A={enableTime:!0,time_24hr:!0,defaultDate:O(),minDate:"today",minuteIncrement:1,onClose(t){[e]=t,e<new Date?(d("Please choose a date in the future"),n(a),localStorage.removeItem("countdownDate"),localStorage.removeItem("isCountdownRunning")):(n(m),Number(localStorage.getItem("countdownDate"))!==e.getTime()&&localStorage.setItem("countdownDate",e.getTime()),localStorage.setItem("isCountdownRunning","false"))}};R("#datetime-picker",A);
//# sourceMappingURL=1-timer.js.map
